{{ extends "layout.html" }} {{ block "title" .}} {{ if .request.endpoint ==
'public_timeline' }} Public Timeline {{ else if .request.endpoint ==
'user_timeline' }} {{ .profile_user.username }}'s Timeline {{ else }} My
Timeline {{ end }} {{ end }} {{ block "body" .}}
<h2>{{ self.title() }}</h2>
{{ if .user }} {{ if .request.endpoint == 'user_timeline' }}
<div class="followstatus">
  {{ if .user.user_id == .profile_user.user_id }} This is you! {{ else if
  .followed }} You are currently following this user.
  <a class="unfollow" href="/{{.profile_user.username}}/unfollow"
    >Unfollow user</a
  >. {{ else }} You are not yet following this user.
  <a class="follow" href="/{{.profile_user.username}}/follow">Follow user</a>.
  {{ end }}
</div>
{{ else if .request.endpoint == 'timeline' }}
<div class="twitbox">
  <h3>What's on your mind {{ .user.username }}?</h3>
  <form action="/add_message" method="post">
    <p>
      <input type="text" name="text" size="60" /><!--
          --><input type="submit" value="Share" />
    </p>
  </form>
</div>
{{ end }} {{ end }}
<ul class="messages">
  {{ range .usermessages }}
  <li>
    <img src="{{ 48 | .user.gravatar }}" />
    <p>
      <strong><a href="/{{.user.username}}">{{ .user.username }}</a></strong>
      {{ .message.text }}
      <small>&mdash; {{ .message.format_datetime }}</small>
      {{ else }}
      <li>
        <em>There's no message so far.</em>
        {{ end }}
      </li>
    </p>
  </li>
</ul>

{{ end }}
